{% extends 'layout.html' %}
{% block content %}
<div class="section-title">
  <span></span>
  <h2>Dashboard</h2>
</div>

{% if graphs_json %}
  <div class="card p-4 mb-4">
    <div id="graphs"></div>
  </div>
  <!-- Plotly JS via CDN -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script>
    // Parse the JSON containing the Plotly figures
    var figures = JSON.parse('{{ graphs_json | safe }}');
    // Render each figure into its own div
    for (var i = 0; i < figures.length; i++) {
      var fig = figures[i];
      var divId = 'graph_' + i;
      var div = document.createElement('div');
      div.className = 'mb-4';
      div.id = divId;
      document.getElementById('graphs').appendChild(div);
      Plotly.newPlot(divId, fig['data'], fig['layout']);
    }
  </script>
{% else %}
  <div class="card card-muted p-4">
    <p class="mb-0 text-muted">Nenhum dado dispon√≠vel para exibir o dashboard.</p>
  </div>
{% endif %}
{% endblock %}